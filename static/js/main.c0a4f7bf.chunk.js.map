{"version":3,"sources":["simulation.js","components/components.js","App.js","serviceWorker.js","index.js"],"names":["wReturnArr","data","alloc","period","equity_delta","Decimal","end_equity","beg_equity","div","bond_delta","end_bond","beg_bond","return_arrs","equity","bond","range","Math","min","length","bond_returns","equity_returns","i","random","floor","push","rand","map","j","equity_alloc","plus","times","bond_alloc","equity_return","bond_return","outcome","returns","cashflows","Error","asset_levels","reduce","acc","curr","idx","earnings","add","post_mkt_return","next","max","simRunner","state","Promise","resolve","savings","time_to_ret","contrib","dist","Array","fill","breakpoint","flow","years_to_ret","duration","contribution","ret_income","results","asset_data","JSON","parse","window","localStorage","getItem","allocation","sort","arr1","arr2","survival","scenarios","zeros_count","parseInt","fail_rate","minus","toString","maxDrawdown","values","MMD","peak","Infinity","DD","greaterThan","toDecimalPlaces","Field","props","react_default","a","createElement","id","className","htmlFor","name","title","type","onChange","value","Results","_React$Component","SimulationResults","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","myRef","React","createRef","inherits","createClass","key","setTimeout","document","querySelector","scrollIntoView","behavior","Fragment","components_Chart","StatTable","Component","Chart","chart_x_axis","from","v","k","x","y","median","buttom10","top10","createPlotlyComponent","Plotly","config","displaylogo","displayModeBar","scrollZoom","layout","text","legend","orientation","autosize","margin","r","l","t","b","useResizeHandler","style","width","height","overflow","set","rounding","scope","Intl","NumberFormat","format","round","concat","Spinner","_React$Component2","SpinnerButton","apply","arguments","handler","disabled","Form","onSubmit","handleSubmit","handleAllocChange","loading","handleSim","Data","bind","assertThisInitialized","handleChange","loaded","outcomes","fetch","then","res","ok","json","equity_data","bond_data","forEach","index_name","mo_return","setItem","stringify","catch","error","console","log","getElementById","innerHTML","_this2","setState","e","preventDefault","field","target","defineProperty","App","App_Data","Boolean","location","hostname","match","ReactDOM","render","src_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c0a4f7bf.chunk.js","sourcesContent":["import { Decimal } from 'decimal.js';\n\nconst rand = function pickRandom(data, period){\n    /**\n     * takes historical data and returns randomized pair of returns\n     * @param {Object} - histrocial data\n     * @return {Object} - random returns for each asset class\n     */\n    const equity = data.equity;\n    const bond = data.bond;\n    const range = Math.min(bond.length, equity.length) -1;\n    const bond_returns = [];\n    const equity_returns = [];\n    for (let i = 0; i < period *12; i+= 1){\n        const random = Math.floor(Math.random() * (range + 1));\n        bond_returns.push(bond[bond.length - random -1]);\n        equity_returns.push(equity[equity.length - random -1]);\n    }\n    return { \n        bond: bond_returns, \n        equity: equity_returns,\n    } ;\n}\n\nconst wReturnArr =  function generateWeightedReturnArr(data, alloc, period){\n    /**\n     * Takes random return arrays and inital and ending allocations returns weighted returns\n     * @param {Object} return_arrs - object with return arrays for each asset class\n     * @param {Object} alloc - object with inital and ending allocations\n     * @param {Number} period - number representing the time until retirment\n     * @returns {Array} - weighted return array\n     */\n    const equity_delta = Decimal(alloc.end_equity - alloc.beg_equity).div(period -1);\n    const bond_delta = Decimal(alloc.end_bond - alloc.beg_bond).div(period -1);\n    const return_arrs = rand(data, period)\n    return return_arrs.equity.map( (i,j) =>{\n        const equity_alloc = j< period \n            ? Decimal( alloc.beg_equity).plus(equity_delta.times(j))\n            : Decimal(alloc.end_equity);        \n        const bond_alloc = j< period \n            ? Decimal(alloc.beg_bond).plus(bond_delta.times(j))\n            : Decimal(alloc.end_bond);  \n        const equity_return = Decimal(return_arrs.equity[j]).div(100)\n            .times(equity_alloc);\n        const bond_return = Decimal(return_arrs.bond[j]).div(100)\n            .times(bond_alloc);\n        return equity_return.plus(bond_return)\n    })\n}\n\nconst flow = function generateCashFlows (savings, time_to_ret, period, contrib, dist){\n    /**\n    * Takes inital savings\n    * @param {string} savings - inital savings\n    * @param {string} time_to_ret - years making contributions before taking distributions\n    * @param {string} period - number of years to perform simulation over\n    * @param {string} contrib - monthly contribution over time_to_ret starting at the end of the first month\n    * @param {string} dist - annual distribution after time_to_ret\n    * @return {Array} - listing of monthly cashflows during simulation period\n    */\n   const cashflows = Array(period * 12 +1).fill(0);\n   const breakpoint = time_to_ret * 12;\n   return cashflows.map( (i, j) => {\n       if (j === 0){\n           return savings;\n       }else if (j <= breakpoint){\n           return Decimal(contrib);\n       }else{\n           return Decimal(dist).div('-12');\n       }\n   } )\n}\n\nconst outcome = function calcOutcome (returns, cashflows ){\n    /**\n     * Takes cashflows and returns and returns future cash levels\n     * @param {Array} returns - returns over the period\n     * @param {Array} cashflows - cashflows at the end of each month\n     * @return {Array} - value of assets at each point during the period\n     */\n    if (returns.length +1 !== cashflows.length){\n        throw new Error('Invalid input - cashflows must equal the length of returns')\n    }\n    const asset_levels = [Decimal(cashflows[0])];\n    cashflows.reduce((acc, curr, idx) => {\n        const earnings = Decimal('1').add(returns[idx -1]);\n        const post_mkt_return = Decimal(acc).times(earnings);\n        const next = Decimal.max( post_mkt_return.plus(curr), 0);\n        asset_levels.push(next);\n        return next;\n    })\n    return asset_levels;\n}\n\nconst simRunner = function runSimulation(state){\n    const prmoise = new Promise((resolve)=>{\n        //Generate cashflows\n        const cashflows = flow(state.savings, state.years_to_ret, state.duration,\n            state.contribution, state.ret_income);\n        const results = [];\n        const asset_data = JSON.parse(window.localStorage.getItem('asset_data'));\n        for (let i = 0; i < 100; i += 1){\n            const returns =  wReturnArr(asset_data, state.allocation, state.duration);\n            results.push(outcome(returns, cashflows ));\n        }\n        resolve(results.sort((arr1, arr2)=>arr1[arr1.length -1] - arr2[arr2.length-1]))\n    })\n    return prmoise\n}\n\nconst survival = function calcSurvivalRate(scenarios){\n    const zeros_count = scenarios.reduce((acc, curr)=>{\n        const is_zero = parseInt(curr[curr.length-1]) === 0 ? 1 : 0;\n        return acc + is_zero\n    },0);\n    const fail_rate = Decimal(zeros_count).div(scenarios.length /100);\n    return Decimal(100).minus(fail_rate).toString();\n}\n\nconst maxDrawdown = function calcMaxDrawdown(values){\n  let MMD = Decimal(0);\n  let peak = Decimal(-Infinity);\n  for (let i = 0; i < values.length; i += 1){\n    peak = values[i].greaterThan(peak) ? values[i] : peak;\n    const step1 = peak.minus(values[i]);\n    const step2 = step1.div(peak);\n    const DD = step2.times(100);\n    //const DD = 100.0 * (peak - values[i]) / peak;\n    MMD = DD.greaterThan(MMD) ? DD : MMD;\n  }\n  return MMD.toDecimalPlaces(2).toString();\n}\n\nexport {rand, wReturnArr, flow, outcome, simRunner, survival, maxDrawdown};","/* global Plotly:true */\n\nimport React from 'react';\nimport createPlotlyComponent from 'react-plotly.js/factory'\nimport { Decimal } from 'decimal.js';\nimport { maxDrawdown } from '../simulation';\n\nconst Field = function FieldArea(props){\n    return(\n      <div id='form-group row'> \n        <label className='' htmlFor={props.name} >\n          <h5>{props.title}: </h5>\n        </label>\n        <input type='number' onChange={props.onChange} name={props.name} \n        value ={props.value} id={props.name} className='form-control' /> \n      </div>  \n    );\n};\n\nconst Results = class SimulationResults extends React.Component{\n  constructor(props){\n    super(props);\n    this.myRef = React.createRef();\n  }\n  componentDidMount(){\n    setTimeout(()=>{\n      const chart_top = document.querySelector('.js-plotly-plot');\n      chart_top.scrollIntoView({behavior: \"smooth\"});\n    },10)\n  }\n\n  render(){\n    return(\n      <React.Fragment>\n        <Chart data={this.props.data} duration={this.props.duration}/>\n        <StatTable data={this.props.data} />\n      </React.Fragment>\n    )\n  }\n}\n\nconst Chart = function Chart(props) {\n  const chart_x_axis = Array.from({length: props.duration * 12 +1},(v,k)=>k/12);\n  const data = [{\n    x: chart_x_axis,\n    y: props.data.median.map( i => parseInt(i.toString())),\n    type: 'scatter',\n    name: '50th Percentile',\n  },\n  {\n    x: chart_x_axis,\n    y: props.data.buttom10.map( i => parseInt(i.toString())),\n    type: 'scatter',\n    name: '10th Percentile'\n  },\n  {\n    x: chart_x_axis,\n    y: props.data.top10.map( i => parseInt(i.toString())),\n    type: 'scatter',\n    name: '90th Percentile'\n  },]\n  return (\n      React.createElement(createPlotlyComponent(Plotly),{\n          data: data,\n          config: { \n            displaylogo: false, \n            displayModeBar: false,\n            scrollZoom: false,\n          },\n          layout: {\n            title:{ text: 'Simulated Portfolio Balances' },\n            legend: { orientation: \"h\" },\n            autosize: true,\n            margin:{ r: 30, l: 40, t: 80, b: 40 },\n          },\n          useResizeHandler: true,\n          style: {\n            width: \"100%\",\n            height: \"100%\",\n            overflow: \"auto\",\n          },\n      })\n  )   \n}\n\nconst StatTable = function SummaryStatTable(props){\n  const length = props.data.median.length;\n  Decimal.set({rounding:0})\n  return(\n    <div className='table-responsive'>\n      <table className=\"table table-striped table-hover\">\n        <thead>\n          <tr>\n            <th scope=\"col\"></th>\n            <th scope=\"col\">10th Percentile\t</th>\n            <th scope=\"col\">50th Percentile\t</th>\n            <th scope=\"col\">90th Percentile\t</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <th scope=\"row\">Ending Balance</th>\n            <td>{ Intl.NumberFormat().format(props.data.buttom10[length -1].round())  } </td>\n            <td>{ Intl.NumberFormat().format(props.data.median[length -1].round())  } </td>\n            <td>{ Intl.NumberFormat().format(props.data.top10[length -1].round())  } </td>\n          </tr>\n          <tr>\n            <th scope=\"row\">Maximum Drawdown</th>\n            <td>{ `-${maxDrawdown(props.data.buttom10)}%` } </td>\n            <td>{ `-${maxDrawdown(props.data.median)}%` }</td>\n            <td>{ `-${maxDrawdown(props.data.top10)}%` } </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n  )\n}\n\nconst Spinner = class SpinnerButton extends React.Component{\n    componentDidMount(){\n        //TODO: need to fix this code - works in chrome, but not other browsers\n        setTimeout(this.props.handler,50)\n    }\n\n    render(){\n        const classes = `fas fa-spinner`;\n        return (\n            <button type='submit' id='submit-btm' className='btn btn-primary' disabled>\n              <i className={classes}></i> Simulating\n            </button>\n        )\n    }\n}\n\nconst Form = function InputForm(props) {\n  return(\n      <form className='form-horizontal' onSubmit={props.handleSubmit}>  \n        <Field name='years_to_ret' value={props.state.years_to_ret} \n          onChange={props.handler} title='Years to Retirement' />\n        \n        <Field name='duration' value={props.state.duration} \n        onChange={props.handler} title='Duration of Simulation' />\n        \n        <Field name='savings' value={props.state.savings} \n        onChange={props.handler} title='Current Savings' />\n\n        <Field name='contribution' value={props.state.contribution}\n        onChange={props.handler} title='Monthly Contribution until Retirement' />\n\n        <Field name='ret_income' value={props.state.ret_income} \n        onChange={props.handler} title='Target Annual Retirement Income' />\n\n        <Field name='beg_equity' value={props.state.allocation.beg_equity}\n        onChange={props.handleAllocChange} title='Current Equity Allocation (%)' />\n\n        <Field name='beg_bond' value={props.state.allocation.beg_bond}\n        onChange={props.handleAllocChange} title='Current Fixed Income Allocation (%)' />\n        \n        <Field name='end_equity' value={props.state.allocation.end_equity}\n        onChange={props.handleAllocChange} title='Final Equity Allocation (%)' />\n\n        <Field name='end_bond' value={props.state.allocation.end_bond}\n        onChange={props.handleAllocChange} title='Final Fixed Income Allocation (%)' />\n\n        <div id='logger'></div>\n        {props.state.loading\n        ? <Spinner data={props.state} handler={props.handleSim} /> \n        : <button type='submit' id='submit-btn' \n          className='btn btn-primary'>Simulate!</button>}\n        \n      </form>\n  )\n}\n\nexport { Field, Results, Spinner, Form } ","import React from 'react';\n//import logo from './logo.svg';\nimport './App.css';\nimport { simRunner, survival } from './simulation';\nimport { Results, Form } from './components/components.js';\n\nclass Data extends React.Component{\n  constructor(props){\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleAllocChange = this.handleAllocChange.bind(this);\n    this.handleSim = this.handleSim.bind(this);\n    this.state = {\n      loaded: false,\n      loading: false,\n      years_to_ret: '30',\n      duration: '50',\n      savings: '50000',\n      contribution: '1000',\n      ret_income: '100000',\n      allocation: {\n        beg_equity: '60',\n        beg_bond: '40',\n        end_equity: '20',\n        end_bond: '80'\n      },\n      returns: [],\n      outcomes: {},\n    };\n  }\n\n  componentDidMount(){\n    fetch('https://calc-project.herokuapp.com/api/index/')\n    .then((res) => {\n      if (!res.ok){\n        throw new Error('Network response was not ok.');\n      }\n      return res.json()\n    })\n    .then((data) => {\n      const equity_data = [];\n      const bond_data = [];\n      data.forEach((i) => {\n        if (i.index_name === 'SPX'){\n          equity_data.push(i.mo_return);\n        }else{\n          bond_data.push(i.mo_return);\n        }\n      })\n      if (bond_data.length < 1 || equity_data.length <1){\n        throw new Error('API call returned no data')\n      }\n      const asset_data = {\n        bond: bond_data,\n        equity: equity_data,\n      }\n      window.localStorage.setItem('asset_data', JSON.stringify(asset_data))\n  })\n  .catch((error) => {\n    console.log(error);\n    document.getElementById('logger').innerHTML = error;\n  })\n}\n\n  handleSim(){\n    simRunner(this.state)\n    .then((scenarios)=>{\n      window.localStorage.setItem('scenarios', JSON.stringify(scenarios))\n      this.setState({\n        loaded: true,\n        loading: false,\n        outcomes: {\n          median: scenarios[Math.floor(scenarios.length /2)],\n          buttom10:  scenarios[Math.floor(scenarios.length /10)],\n          top10:  scenarios[Math.floor(scenarios.length /10 * 9)],\n          survival: survival(scenarios),\n        },\n      })\n    })\n  }\n\n  handleSubmit(e){\n    e.preventDefault();\n    this.setState({\n      loading: true,\n    })\n  }\n\n  handleChange(e){\n    const field = e.target.name;\n    const value = Math.max(e.target.value,0);\n    this.setState({[field] : value.toString()});\n  }\n\n  handleAllocChange(e){\n    const field = e.target.name;\n    const value = Math.max(e.target.value,0);\n    const alloc = this.state.allocation;\n    alloc[field] = value.toString(); \n    this.setState({allocation : alloc});\n  }\n  \n\n  render(){\n    \n    return (\n      <div className='container-fluid'>\n        <p>A Monte Carlo simulator to project your future financial position, given your individual parameters and historical market performance. This simulation supports dynamic changes to asset allocation throughout the simulation period. </p>\n        <p>This project is for illustrative purposes only. This tool should not be used for financial or investment advice. This tool has not been subject to rigorous testing and may contain errors.</p>\n        <Form handleSubmit={this.handleSubmit} handler={this.handleChange} \n            state={this.state} handleAllocChange={this.handleAllocChange}\n            handleSim={this.handleSim}  />\n\n        {this.state.loaded && <Results title={this.state.outcomes.survival} \n          data={this.state.outcomes} duration={this.state.duration} />}\n\n      </div>      \n    )\n  }\n}\n\nfunction App(){\n  return (\n    <div className='container'>\n      <Data/>\n    </div>\n  )\n}\n\nexport default App ;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}